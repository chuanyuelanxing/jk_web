function register_key(){tip="NOHELP",document.getElementById("featu_del").addEventListener("mouseover",function(){tip="featu_del"}),document.getElementById("featu_del").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("featu_zap").addEventListener("mouseover",function(){tip="featu_zap"}),document.getElementById("featu_zap").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("featu_zap_scr").addEventListener("mouseover",function(){tip="featu_zap_scr",console.log("tip="+tip)}),document.getElementById("featu_zap_scr").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem01").addEventListener("mouseover",function(){tip="mem01"}),document.getElementById("mem01").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem02").addEventListener("mouseover",function(){tip="mem02"}),document.getElementById("mem02").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem03").addEventListener("mouseover",function(){tip="mem03"}),document.getElementById("mem03").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem04").addEventListener("mouseover",function(){tip="mem04"}),document.getElementById("mem04").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem05").addEventListener("mouseover",function(){tip="mem05"}),document.getElementById("mem05").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_Negate").addEventListener("mouseover",function(){tip="num_Negate"}),document.getElementById("num_Negate").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_recip").addEventListener("mouseover",function(){tip="num_recip"}),document.getElementById("num_recip").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_per").addEventListener("mouseover",function(){tip="num_per"}),document.getElementById("num_per").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_sqr").addEventListener("mouseover",function(){tip="num_sqr"}),document.getElementById("num_sqr").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num01").addEventListener("click",function(){char_pro(1)}),document.getElementById("num02").addEventListener("click",function(){char_pro(2)}),document.getElementById("num03").addEventListener("click",function(){char_pro(3)}),document.getElementById("num04").addEventListener("click",function(){char_pro(4)}),document.getElementById("num05").addEventListener("click",function(){char_pro(5)}),document.getElementById("num06").addEventListener("click",function(){char_pro(6)}),document.getElementById("num07").addEventListener("click",function(){char_pro(7)}),document.getElementById("num08").addEventListener("click",function(){char_pro(8)}),document.getElementById("num09").addEventListener("click",function(){char_pro(9)}),document.getElementById("num00").addEventListener("click",function(){char_pro(0)}),document.getElementById("num_dot").addEventListener("click",function(){char_pro(".")}),document.getElementById("num_add").addEventListener("click",function(){char_pro("+")}),document.getElementById("num_sub").addEventListener("click",function(){char_pro("-")}),document.getElementById("num_mul").addEventListener("click",function(){char_pro("X")}),document.getElementById("num_div").addEventListener("click",function(){char_pro("÷")}),document.getElementById("num_equ").addEventListener("click",function(){char_pro("=")}),document.getElementById("featu_del").addEventListener("click",function(){char_pro("bk_sp")}),document.getElementById("featu_zap").addEventListener("click",function(){char_pro("C")}),document.getElementById("featu_zap_scr").addEventListener("click",function(){char_pro("scr")}),document.getElementById("mem01").addEventListener("click",function(){char_pro("store_mem")}),document.getElementById("mem02").addEventListener("click",function(){char_pro("read_mem")}),document.getElementById("mem03").addEventListener("click",function(){char_pro("add_mem")}),document.getElementById("mem04").addEventListener("click",function(){char_pro("mul_mem")}),document.getElementById("mem05").addEventListener("click",function(){char_pro("zap_mem")}),document.getElementById("num_Negate").addEventListener("click",function(){char_pro("Negate")}),document.getElementById("num_recip").addEventListener("click",function(){char_pro("recip")}),document.getElementById("num_per").addEventListener("click",function(){char_pro("per")}),document.getElementById("num_sqr").addEventListener("click",function(){char_pro("sqr")})}function addEventHandler(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function showKeyDown(e){console.log("evt="+e),e=e||window.event,console.log("new_evt="+e),72==e.keyCode&&"num03"==tip?alert(e.keyCode+tip):onHelp(72==e.keyCode&&"featu_del"==tip?"featu_del":72==e.keyCode&&"featu_zap"==tip?"featu_zap":72==e.keyCode&&"featu_zap_scr"==tip?"featu_zap_scr":72==e.keyCode&&"mem01"==tip?"mem01":72==e.keyCode&&"mem02"==tip?"mem02":72==e.keyCode&&"mem03"==tip?"mem03":72==e.keyCode&&"mem04"==tip?"mem04":72==e.keyCode&&"mem05"==tip?"mem05":72==e.keyCode&&"num_Negate"==tip?"num_Negate":72==e.keyCode&&"num_recip"==tip?"num_recip":72==e.keyCode&&"num_per"==tip?"num_per":72==e.keyCode&&"num_sqr"==tip?"num_sqr":"init")}function onHelp(e){var n={};switch(console.log("arr="+n.featu_del),n.init="移动鼠标到计算器上相关按键上同时在PC键盘上按H键，就会出现帮助提示；在计数器空白位置按下H键会出现本提示，5秒后自动消失！",n.featu_del="在屏幕上将所输入数字从最右边，一位一位删除",n.featu_zap="把内存及屏幕上的所有数字，相当于计算器重新开机",n.featu_zap_scr="保留内存中数字但是清空屏幕上显示的数字，M标志继续保留，把它们转化为0",n.mem01="将显示屏上的数字存入的内存中，如果内存中已有数字则替换内存中的数字，同时屏幕左下角显示M标志",n.mem02="将内存中的数字显示在显示屏上，如果内存中没有数字，则显示0；同时屏幕左下角显示M标志",n.mem03="将显示屏上的数据与的内存中的数字相加，并用运算结果替换内存中已有的数字，如果内存中没有数字，则直接把显示屏上的数字存入内存；同时屏幕左下角显示M标志,屏幕上数字不会有变化",n.mem04="将显示屏上的数据与的内存中的数字相乘，并用运算结果替换内存中已有的数字，如果内存中没有数字，则直接把显示屏上的数字存入内存；同时屏幕左下角显示M标志,屏幕上数字不会有变化",n.mem05="将内存中的数字清空,同时左下角的M标志消失，但是当前屏幕数字不变",n.num_Negate="将当前显示屏幕上的数字取反，正数变为负书，负数变为正数",n.num_recip="计算一个数的倒数",n.num_per="返回一个数字的百分数形式，0.2=0.002，就是相当于一个数除以100；",n.num_sqr="计算一个数的开方，例如9的开方等于3",e){case"featu_del":document.getElementById("help").innerHTML=n.featu_del,document.getElementById("help").style.display="block";break;case"featu_zap":document.getElementById("help").innerHTML=n.featu_zap,document.getElementById("help").style.display="block";break;case"featu_zap_scr":document.getElementById("help").innerHTML=n.featu_zap_scr,document.getElementById("help").style.display="block";break;case"mem01":document.getElementById("help").innerHTML=n.mem01,document.getElementById("help").style.display="block";break;case"mem02":document.getElementById("help").innerHTML=n.mem02,document.getElementById("help").style.display="block";break;case"mem03":document.getElementById("help").innerHTML=n.mem03,document.getElementById("help").style.display="block";break;case"mem04":document.getElementById("help").innerHTML=n.mem04,document.getElementById("help").style.display="block";break;case"mem05":document.getElementById("help").innerHTML=n.mem05,document.getElementById("help").style.display="block";break;case"num_Negate":document.getElementById("help").innerHTML=n.num_Negate,document.getElementById("help").style.display="block";break;case"num_recip":document.getElementById("help").innerHTML=n.num_recip,document.getElementById("help").style.display="block";break;case"num_per":document.getElementById("help").innerHTML=n.num_per,document.getElementById("help").style.display="block";break;case"num_sqr":document.getElementById("help").innerHTML=n.num_sqr,document.getElementById("help").style.display="block";break;default:document.getElementById("help").innerHTML=n.init,document.getElementById("help").style.display="block",setTimeout('document.getElementById("help").style.display="none";',5e3)}}function offHelp(){document.getElementById("help").style.display="none"}function char_pro(e){switch(e){case".":case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:0==cal_num[1].length?(check_readmem(),-1!=cal_num[0].indexOf(".")&&"."==e||(cal_num[0]=cal_num[0]+e,cal_num[0]=check_number(cal_num[0]),console.log("首次输入，判断小数点:"+cal_num)),cal_num[0]=check_number(cal_num[0]),document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):"L"==cal_num[1]?(cal_num[1]="",-1!=cal_num[2].indexOf(".")&&"."==e||(cal_num[2]=cal_num[0]+e,cal_num[2]=check_number(cal_num[0])),document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):(-1!=cal_num[2].indexOf(".")&&"."==e||(cal_num[2]=cal_num[2]+e,cal_num[0]=check_number(cal_num[0])),console.log("输入第二个参数下，判断完成小数点后，不加。原地赋值:"+cal_num),document.getElementById("cal_span").innerHTML=check_len(check_number(cal_num[2])));break;case"+":contiue_cal("+");break;case"-":contiue_cal("-");break;case"X":contiue_cal("X");break;case"÷":contiue_cal("÷");break;case"bk_sp":bk_sp();break;case"C":tozero();break;case"Negate":Negate();break;case"per":per();break;case"recip":recip();break;case"sqr":sqr();break;case"scr":scrToZero();break;case"store_mem":storeMem();break;case"read_mem":readMem();break;case"add_mem":console.log("addMem"),addMem();break;case"mul_mem":mulMem();break;case"zap_mem":zapMem();break;default:process_equ()}}function check_readmem(){"p"==store[1]?(store[1]="",document.getElementById("cal_span").innerHTML="",cal_num[0]=""):console.log("store[1]="+store[1])}function check_number(e,n){return"r"==n?String(e-0):0==e.indexOf("0")&&-1==e.indexOf(".")?(console.log("line130"),String(e-0)):0==e.indexOf("0")&&e.length-e.lastIndexOf(".")==1?String(e-0)+".":(console.log("line136"),e)}function tozero(){store[0]="",cal_num[0]="",cal_num[1]="",cal_num[2]="",console.log("cal_numC:"+cal_num[0]),document.getElementById("cal_span").innerHTML="0",document.getElementById("logM").style.display="none"}function scrToZero(){cal_num[0]="",cal_num[1]="",cal_num[2]="",console.log("cal_numC:"+cal_num[0]),document.getElementById("cal_span").innerHTML="0"}function storeMem(){store[0]=document.getElementById("cal_span").innerHTML,console.log("storeMem store="+store[0]),document.getElementById("logM").style.display="block"}function readMem(){cal_num[0]=store[0],store[1]="p",console.log("readMem cal_num[0]="+store[0]),cal_num[1]="",cal_num[2]="",console.log("readMem store="+store[0]),store[0]?document.getElementById("cal_span").innerHTML=store[0]:document.getElementById("cal_span").innerHTML="0"}function addMem(){var e=document.getElementById("cal_span").innerHTML;console.log("addMem x="+e),store[0]=String(add(store[0]-0,e-0)),console.log("addMem store="+store[0]),document.getElementById("logM").style.display="block"}function mulMem(){var e=document.getElementById("cal_span").innerHTML;console.log("addMem x="+e),store[0]=String(mul(store[0]-0,e-0)),document.getElementById("logM").style.display="block"}function zapMem(){store[0]="",document.getElementById("logM").style.display="none"}function Negate(){var e=document.getElementById("cal_span").innerHTML;document.getElementById("cal_span").innerHTML=String(mul(e-0,-1)),cal_num[2]?cal_num[2]=String(mul(e-0,-1)):cal_num[0]=String(mul(e-0,-1))}function recip(){var e=document.getElementById("cal_span").innerHTML;console.log("recip x="+e),"0"==e?document.getElementById("cal_span").innerHTML="ERROR":(document.getElementById("cal_span").innerHTML=String(div(1,e-0)),cal_num[2]?cal_num[2]=String(div(1,e-0)):cal_num[0]=String(div(1,e-0))),console.log("recip x1="+e),console.log(cal_num)}function per(){var e=document.getElementById("cal_span").innerHTML;document.getElementById("cal_span").innerHTML=String(mul(e-0,.01)),cal_num[2]?cal_num[2]=String(mul(e-0,.01)):cal_num[0]=String(mul(e-0,.01))}function sqr(){var e=document.getElementById("cal_span").innerHTML;e=Math.sqrt(e-0),console.log("sqr x="+e),document.getElementById("cal_span").innerHTML=String(e),cal_num[2]?cal_num[2]=String(e):cal_num[0]=String(e)}function bk_sp(){var e=document.getElementById("cal_span").innerHTML;e=e.slice(0,e.length-1),document.getElementById("cal_span").innerHTML=e,cal_num[2]?cal_num[2]=String(e):cal_num[0]=String(e)}function contiue_cal(e){cal_num[2]?(process_equ(),document.getElementById("cal_span").innerHTML=check_number(cal_num[1],"r"),cal_num[1]=e,document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):(cal_num[1]=e,document.getElementById("cal_span").innerHTML=cal_num[1])}function process_equ(){console.log("按了=号情况下"+cal_num),"+"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_len(add(cal_num[0],cal_num[2])),store_equ(cal_num[1])):"-"==cal_num[1]?(document.getElementById("cal_span").innerHTML=sub(cal_num[0],cal_num[2]),store_equ(cal_num[1]),console.log("line 155 -号后再按=号情况"),console.log("cal_num数组为"+cal_num),console.log("cal_num【1】长度为"+cal_num[1].length)):"X"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_number(String(check_len(mul(cal_num[0],cal_num[2])))),store_equ(cal_num[1])):"÷"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_len(div(cal_num[0],cal_num[2])),console.log("line148 process_equ    cal_num数组为"+cal_num),store_equ(cal_num[1])):""!=cal_num[2]?(document.getElementById("cal_span").innerHTML=check_len(div(cal_num[0],cal_num[2])),console.log("line 82 error"),store_equ(cal_num[1])):(console.log("line 84 几个等号？"),scrToZero())}function store_equ(e){switch(e){case"+":cal_num[0]=String(add(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"-":cal_num[0]=String(sub(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"X":cal_num[0]=String(mul(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"/":cal_num[0]="ERROR"==String(check_len(div(cal_num[0],cal_num[2])))?"":String(check_len(div(cal_num[0],cal_num[2]))),cal_num[1]="L",cal_num[2]="",console.log("line187 store_equ    cal_num数组为"+cal_num)}}function check_len(e){return"number"==typeof e&&"Infinity"!=e?-1==String(e).indexOf(".")?e:String(e).length<10?(console.log("z-strz-len:"+String(e).length),console.log(String(e)),String(e)):e.toFixed(10-String(e).indexOf(".")-1):"number"==typeof e&&"Infinity"==e?"ERROR":(console.log("z-str=:"+e),e.length>11?"ERROR":e)}function inputnumber(e){char_pro(e)}function add(e,n){var t,c,m;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{c=n.toString().split(".")[1].length}catch(e){c=0}return m=Math.pow(10,Math.max(t,c)),(mul(e,m)+mul(n,m))/m}function sub(e,n){var t,c,m;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{c=n.toString().split(".")[1].length}catch(e){c=0}return m=Math.pow(10,Math.max(t,c)),(mul(e,m)-mul(n,m))/m}function mul(e,n){var t=0,c=e.toString(),m=n.toString();try{t+=c.split(".")[1].length}catch(e){}try{t+=m.split(".")[1].length}catch(e){}return Number(c.replace(".",""))*Number(m.replace(".",""))/Math.pow(10,t)}function div(e,n){var t,c,m=0,l=0;try{m=e.toString().split(".")[1].length}catch(e){}try{l=n.toString().split(".")[1].length}catch(e){}return t=Number(e.toString().replace(".","")),c=Number(n.toString().replace(".","")),mul(t/c,Math.pow(10,l-m))}cal_num=new Array("","",""),store=new Array("","");
function register_key(){tip="NOHELP",document.getElementById("featu_del").addEventListener("mouseover",function(){tip="featu_del"}),document.getElementById("featu_del").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("featu_zap").addEventListener("mouseover",function(){tip="featu_zap"}),document.getElementById("featu_zap").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("featu_zap_scr").addEventListener("mouseover",function(){tip="featu_zap_scr",console.log("tip="+tip)}),document.getElementById("featu_zap_scr").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem01").addEventListener("mouseover",function(){tip="mem01"}),document.getElementById("mem01").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem02").addEventListener("mouseover",function(){tip="mem02"}),document.getElementById("mem02").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem03").addEventListener("mouseover",function(){tip="mem03"}),document.getElementById("mem03").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem04").addEventListener("mouseover",function(){tip="mem04"}),document.getElementById("mem04").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("mem05").addEventListener("mouseover",function(){tip="mem05"}),document.getElementById("mem05").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_Negate").addEventListener("mouseover",function(){tip="num_Negate"}),document.getElementById("num_Negate").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_recip").addEventListener("mouseover",function(){tip="num_recip"}),document.getElementById("num_recip").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_per").addEventListener("mouseover",function(){tip="num_per"}),document.getElementById("num_per").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num_sqr").addEventListener("mouseover",function(){tip="num_sqr"}),document.getElementById("num_sqr").addEventListener("mouseout",function(){tip="NOHELP",offHelp()}),document.getElementById("num01").addEventListener("click",function(){char_pro(1)}),document.getElementById("num02").addEventListener("click",function(){char_pro(2)}),document.getElementById("num03").addEventListener("click",function(){char_pro(3)}),document.getElementById("num04").addEventListener("click",function(){char_pro(4)}),document.getElementById("num05").addEventListener("click",function(){char_pro(5)}),document.getElementById("num06").addEventListener("click",function(){char_pro(6)}),document.getElementById("num07").addEventListener("click",function(){char_pro(7)}),document.getElementById("num08").addEventListener("click",function(){char_pro(8)}),document.getElementById("num09").addEventListener("click",function(){char_pro(9)}),document.getElementById("num00").addEventListener("click",function(){char_pro(0)}),document.getElementById("num_dot").addEventListener("click",function(){char_pro(".")}),document.getElementById("num_add").addEventListener("click",function(){char_pro("+")}),document.getElementById("num_sub").addEventListener("click",function(){char_pro("-")}),document.getElementById("num_mul").addEventListener("click",function(){char_pro("X")}),document.getElementById("num_div").addEventListener("click",function(){char_pro("÷")}),document.getElementById("num_equ").addEventListener("click",function(){char_pro("=")}),document.getElementById("featu_del").addEventListener("click",function(){char_pro("bk_sp")}),document.getElementById("featu_zap").addEventListener("click",function(){char_pro("C")}),document.getElementById("featu_zap_scr").addEventListener("click",function(){char_pro("scr")}),document.getElementById("mem01").addEventListener("click",function(){char_pro("store_mem")}),document.getElementById("mem02").addEventListener("click",function(){char_pro("read_mem")}),document.getElementById("mem03").addEventListener("click",function(){char_pro("add_mem")}),document.getElementById("mem04").addEventListener("click",function(){char_pro("mul_mem")}),document.getElementById("mem05").addEventListener("click",function(){char_pro("zap_mem")}),document.getElementById("num_Negate").addEventListener("click",function(){char_pro("Negate")}),document.getElementById("num_recip").addEventListener("click",function(){char_pro("recip")}),document.getElementById("num_per").addEventListener("click",function(){char_pro("per")}),document.getElementById("num_sqr").addEventListener("click",function(){char_pro("sqr")})}function addEventHandler(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function showKeyDown(e){console.log("evt="+e),e=e||window.event,console.log("new_evt="+e),72==e.keyCode&&"num03"==tip?alert(e.keyCode+tip):onHelp(72==e.keyCode&&"featu_del"==tip?"featu_del":72==e.keyCode&&"featu_zap"==tip?"featu_zap":72==e.keyCode&&"featu_zap_scr"==tip?"featu_zap_scr":72==e.keyCode&&"mem01"==tip?"mem01":72==e.keyCode&&"mem02"==tip?"mem02":72==e.keyCode&&"mem03"==tip?"mem03":72==e.keyCode&&"mem04"==tip?"mem04":72==e.keyCode&&"mem05"==tip?"mem05":72==e.keyCode&&"num_Negate"==tip?"num_Negate":72==e.keyCode&&"num_recip"==tip?"num_recip":72==e.keyCode&&"num_per"==tip?"num_per":72==e.keyCode&&"num_sqr"==tip?"num_sqr":"init")}function onHelp(e){var n={};switch(console.log("arr="+n.featu_del),n.init="移动鼠标到计算器上相关按键上同时在PC键盘上按H键，就会出现帮助提示；在计数器空白位置按下H键会出现本提示，5秒后自动消失！",n.featu_del="在屏幕上将所输入数字从最右边，一位一位删除",n.featu_zap="把内存及屏幕上的所有数字，相当于计算器重新开机",n.featu_zap_scr="保留内存中数字但是清空屏幕上显示的数字，M标志继续保留，把它们转化为0",n.mem01="将显示屏上的数字存入的内存中，如果内存中已有数字则替换内存中的数字，同时屏幕左下角显示M标志",n.mem02="将内存中的数字显示在显示屏上，如果内存中没有数字，则显示0；同时屏幕左下角显示M标志",n.mem03="将显示屏上的数据与的内存中的数字相加，并用运算结果替换内存中已有的数字，如果内存中没有数字，则直接把显示屏上的数字存入内存；同时屏幕左下角显示M标志,屏幕上数字不会有变化",n.mem04="将显示屏上的数据与的内存中的数字相乘，并用运算结果替换内存中已有的数字，如果内存中没有数字，则直接把显示屏上的数字存入内存；同时屏幕左下角显示M标志,屏幕上数字不会有变化",n.mem05="将内存中的数字清空,同时左下角的M标志消失，但是当前屏幕数字不变",n.num_Negate="将当前显示屏幕上的数字取反，正数变为负书，负数变为正数",n.num_recip="计算一个数的倒数",n.num_per="返回一个数字的百分数形式，0.2=0.002，就是相当于一个数除以100；",n.num_sqr="计算一个数的开方，例如9的开方等于3",e){case"featu_del":document.getElementById("help").innerHTML=n.featu_del,document.getElementById("help").style.display="block";break;case"featu_zap":document.getElementById("help").innerHTML=n.featu_zap,document.getElementById("help").style.display="block";break;case"featu_zap_scr":document.getElementById("help").innerHTML=n.featu_zap_scr,document.getElementById("help").style.display="block";break;case"mem01":document.getElementById("help").innerHTML=n.mem01,document.getElementById("help").style.display="block";break;case"mem02":document.getElementById("help").innerHTML=n.mem02,document.getElementById("help").style.display="block";break;case"mem03":document.getElementById("help").innerHTML=n.mem03,document.getElementById("help").style.display="block";break;case"mem04":document.getElementById("help").innerHTML=n.mem04,document.getElementById("help").style.display="block";break;case"mem05":document.getElementById("help").innerHTML=n.mem05,document.getElementById("help").style.display="block";break;case"num_Negate":document.getElementById("help").innerHTML=n.num_Negate,document.getElementById("help").style.display="block";break;case"num_recip":document.getElementById("help").innerHTML=n.num_recip,document.getElementById("help").style.display="block";break;case"num_per":document.getElementById("help").innerHTML=n.num_per,document.getElementById("help").style.display="block";break;case"num_sqr":document.getElementById("help").innerHTML=n.num_sqr,document.getElementById("help").style.display="block";break;default:document.getElementById("help").innerHTML=n.init,document.getElementById("help").style.display="block",setTimeout('document.getElementById("help").style.display="none";',5e3)}}function offHelp(){document.getElementById("help").style.display="none"}function char_pro(e){switch(e){case".":case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:0==cal_num[1].length?(check_readmem(),-1!=cal_num[0].indexOf(".")&&"."==e||(cal_num[0]=cal_num[0]+e,cal_num[0]=check_number(cal_num[0]),console.log("首次输入，判断小数点:"+cal_num)),cal_num[0]=check_number(cal_num[0]),document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):"L"==cal_num[1]?(cal_num[1]="",-1!=cal_num[2].indexOf(".")&&"."==e||(cal_num[2]=cal_num[0]+e,cal_num[2]=check_number(cal_num[0])),document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):(-1!=cal_num[2].indexOf(".")&&"."==e||(cal_num[2]=cal_num[2]+e,cal_num[0]=check_number(cal_num[0])),console.log("输入第二个参数下，判断完成小数点后，不加。原地赋值:"+cal_num),document.getElementById("cal_span").innerHTML=check_len(check_number(cal_num[2])));break;case"+":contiue_cal("+");break;case"-":contiue_cal("-");break;case"X":contiue_cal("X");break;case"÷":contiue_cal("÷");break;case"bk_sp":bk_sp();break;case"C":tozero();break;case"Negate":Negate();break;case"per":per();break;case"recip":recip();break;case"sqr":sqr();break;case"scr":scrToZero();break;case"store_mem":storeMem();break;case"read_mem":readMem();break;case"add_mem":console.log("addMem"),addMem();break;case"mul_mem":mulMem();break;case"zap_mem":zapMem();break;default:process_equ()}}function check_readmem(){"p"==store[1]?(store[1]="",document.getElementById("cal_span").innerHTML="",cal_num[0]=""):console.log("store[1]="+store[1])}function check_number(e,n){return"r"==n?String(e-0):0==e.indexOf("0")&&-1==e.indexOf(".")?(console.log("line130"),String(e-0)):0==e.indexOf("0")&&e.length-e.lastIndexOf(".")==1?String(e-0)+".":(console.log("line136"),e)}function tozero(){store[0]="",cal_num[0]="",cal_num[1]="",cal_num[2]="",console.log("cal_numC:"+cal_num[0]),document.getElementById("cal_span").innerHTML="0",document.getElementById("logM").style.display="none"}function scrToZero(){cal_num[0]="",cal_num[1]="",cal_num[2]="",console.log("cal_numC:"+cal_num[0]),document.getElementById("cal_span").innerHTML="0"}function storeMem(){store[0]=document.getElementById("cal_span").innerHTML,console.log("storeMem store="+store[0]),document.getElementById("logM").style.display="block"}function readMem(){cal_num[0]=store[0],store[1]="p",console.log("readMem cal_num[0]="+store[0]),cal_num[1]="",cal_num[2]="",console.log("readMem store="+store[0]),store[0]?document.getElementById("cal_span").innerHTML=store[0]:document.getElementById("cal_span").innerHTML="0"}function addMem(){var e=document.getElementById("cal_span").innerHTML;console.log("addMem x="+e),store[0]=String(add(store[0]-0,e-0)),console.log("addMem store="+store[0]),document.getElementById("logM").style.display="block"}function mulMem(){var e=document.getElementById("cal_span").innerHTML;console.log("addMem x="+e),store[0]=String(mul(store[0]-0,e-0)),document.getElementById("logM").style.display="block"}function zapMem(){store[0]="",document.getElementById("logM").style.display="none"}function Negate(){var e=document.getElementById("cal_span").innerHTML;document.getElementById("cal_span").innerHTML=String(mul(e-0,-1)),cal_num[2]?cal_num[2]=String(mul(e-0,-1)):cal_num[0]=String(mul(e-0,-1))}function recip(){var e=document.getElementById("cal_span").innerHTML;console.log("recip x="+e),"0"==e?document.getElementById("cal_span").innerHTML="ERROR":(document.getElementById("cal_span").innerHTML=String(div(1,e-0)),cal_num[2]?cal_num[2]=String(div(1,e-0)):cal_num[0]=String(div(1,e-0))),console.log("recip x1="+e),console.log(cal_num)}function per(){var e=document.getElementById("cal_span").innerHTML;document.getElementById("cal_span").innerHTML=String(mul(e-0,.01)),cal_num[2]?cal_num[2]=String(mul(e-0,.01)):cal_num[0]=String(mul(e-0,.01))}function sqr(){var e=document.getElementById("cal_span").innerHTML;e=Math.sqrt(e-0),console.log("sqr x="+e),document.getElementById("cal_span").innerHTML=String(e),cal_num[2]?cal_num[2]=String(e):cal_num[0]=String(e)}function bk_sp(){var e=document.getElementById("cal_span").innerHTML;e=e.slice(0,e.length-1),document.getElementById("cal_span").innerHTML=e,cal_num[2]?cal_num[2]=String(e):cal_num[0]=String(e)}function contiue_cal(e){cal_num[2]?(process_equ(),document.getElementById("cal_span").innerHTML=check_number(cal_num[1],"r"),cal_num[1]=e,document.getElementById("cal_span").innerHTML=check_len(cal_num[0])):(cal_num[1]=e,document.getElementById("cal_span").innerHTML=cal_num[1])}function process_equ(){console.log("按了=号情况下"+cal_num),"+"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_len(add(cal_num[0],cal_num[2])),store_equ(cal_num[1])):"-"==cal_num[1]?(document.getElementById("cal_span").innerHTML=sub(cal_num[0],cal_num[2]),store_equ(cal_num[1]),console.log("line 155 -号后再按=号情况"),console.log("cal_num数组为"+cal_num),console.log("cal_num【1】长度为"+cal_num[1].length)):"X"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_number(String(check_len(mul(cal_num[0],cal_num[2])))),store_equ(cal_num[1])):"÷"==cal_num[1]?(document.getElementById("cal_span").innerHTML=check_len(div(cal_num[0],cal_num[2])),console.log("line148 process_equ    cal_num数组为"+cal_num),store_equ(cal_num[1])):""!=cal_num[2]?(document.getElementById("cal_span").innerHTML=check_len(div(cal_num[0],cal_num[2])),console.log("line 82 error"),store_equ(cal_num[1])):(console.log("line 84 几个等号？"),scrToZero())}function store_equ(e){switch(e){case"+":cal_num[0]=String(add(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"-":cal_num[0]=String(sub(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"X":cal_num[0]=String(mul(cal_num[0],cal_num[2])),cal_num[1]="L",cal_num[2]="";break;case"/":cal_num[0]="ERROR"==String(check_len(div(cal_num[0],cal_num[2])))?"":String(check_len(div(cal_num[0],cal_num[2]))),cal_num[1]="L",cal_num[2]="",console.log("line187 store_equ    cal_num数组为"+cal_num)}}function check_len(e){return"number"==typeof e&&"Infinity"!=e?-1==String(e).indexOf(".")?e:String(e).length<10?(console.log("z-strz-len:"+String(e).length),console.log(String(e)),String(e)):e.toFixed(10-String(e).indexOf(".")-1):"number"==typeof e&&"Infinity"==e?"ERROR":(console.log("z-str=:"+e),e.length>11?"ERROR":e)}function inputnumber(e){char_pro(e)}function add(e,n){var t,c,m;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{c=n.toString().split(".")[1].length}catch(e){c=0}return m=Math.pow(10,Math.max(t,c)),(mul(e,m)+mul(n,m))/m}function sub(e,n){var t,c,m;try{t=e.toString().split(".")[1].length}catch(e){t=0}try{c=n.toString().split(".")[1].length}catch(e){c=0}return m=Math.pow(10,Math.max(t,c)),(mul(e,m)-mul(n,m))/m}function mul(e,n){var t=0,c=e.toString(),m=n.toString();try{t+=c.split(".")[1].length}catch(e){}try{t+=m.split(".")[1].length}catch(e){}return Number(c.replace(".",""))*Number(m.replace(".",""))/Math.pow(10,t)}function div(e,n){var t,c,m=0,l=0;try{m=e.toString().split(".")[1].length}catch(e){}try{l=n.toString().split(".")[1].length}catch(e){}return t=Number(e.toString().replace(".","")),c=Number(n.toString().replace(".","")),mul(t/c,Math.pow(10,l-m))}cal_num=new Array("","",""),store=new Array("","");